{% extends "base.html" %}
{% load staticfiles %}
{%block headex%}
<script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=9e96a5e2d1484110e610c4df54838615"></script>
<link rel="stylesheet" href="http://cache.amap.com/lbs/static/main1119.css"/>
{%endblock%}
{%block content%}
<div class = "container">
	<div class ="col-md-12">
		<table id="table" class="table table-hover table-striped">
		<th>Title</th>
		<th>Category</th>
		<th>Advocator</th>
		<th>Process</th>
		<th>Action</th>
		{% for act in act_list %}
		<tr>
			<td>{{act.get_title}}</td>
			<td>{{act.get_category}}</td>
			<td>{{act.advocator.get_nick_name}}</td>
			<td></td>
			<td>
				<!--<form action="" method="post">
				{%csrf_token%}
					<input type="text" name ="id" value="{{act.id}}"  style="display:none;"/>
					<input class="btn btn-default btn-sm" type="submit" value="加入">		
				</form>-->
				<button class="btn btn-info btn-xs" data-toggle="modal" data-target="#myModal" type="button">detail</button>
				<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
				  <div class="modal-dialog" role="document">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
				      </div>
				      <div class="modal-body" style="height: 600px">
				      	<div class="row">
				      		<div class="container">
				      	  		<div class="container" id="container" style="height: 300px"></div>
					      	  	<script type="text/javascript">
									var map =new AMap.Map('container',{
								        resizeEnable: true,
								        zoom:11,
								        center: [{{act.get_dlng}}, {{act.get_dlat}}],
								    });
								    var marker = new AMap.Marker({
							            map:map,
							            bubble:true
							        })
							        var point = new AMap.LngLat({{act.get_dlng}},{{act.get_dlat}});
							        marker.setPosition(point);
							  	</script>
				      	  	</div>
				      	</div>
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
				        <button type="button" class="btn btn-primary">Join</button>
				      </div>
				    </div>
				  </div>
				</div>
			</td>
		</tr>
		{%endfor%}
		</table>
	</div>
</div>

{%endblock%}